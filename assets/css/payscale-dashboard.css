/* Inherit from Minimal Mistakes theme */
:root {
  --bg: var(--background-color, #252a34);
  --fg: var(--text-color, #eaeaea);
  --muted: var(--muted-text-color, #9ba1a6);
  --card: var(--sidebar-background-color, #1f232b);
  --border: var(--border-color, #3a3f4b);
  --accent: var(--link-color, #7c4dff);
  --panel: var(--code-background-color, #1a1d24);
  --focus: var(--primary-color, #7c4dff);
}
:root[data-theme="light"] {
  --bg: var(--background-color, #ffffff);
  --fg: var(--text-color, #111827);
  --muted: var(--muted-text-color, #6b7280);
  --card: var(--sidebar-background-color, #ffffff);
  --border: var(--border-color, #e5e7eb);
  --accent: var(--link-color, #0066cc);
  --panel: var(--code-background-color, #f9fafb);
  --focus: var(--primary-color, #2563eb);
}
/* Let theme control links */
.dash-container a {
  color: var(--link-color, var(--accent));
  text-decoration: none;
}
.dash-container a:hover {
  color: var(--link-color-hover, var(--accent));
  text-decoration: underline;
}

.dash-container { 
  max-width: 1200px; 
  margin: 2rem auto; 
  padding: 0 1rem; 
  background: transparent;
}
.header-row { display:flex; gap:1rem; align-items:center; justify-content:space-between; flex-wrap:wrap; }
.controls { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
.controls select, 
.controls button,
.filters select,
.filters-bar button {
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--fg);
  padding: 0.5rem 0.75rem;
  border-radius: 0.375rem;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  transition: all 0.2s ease;
}
.controls button:hover,
.filters-bar button:hover {
  background: var(--panel);
  border-color: var(--accent);
}
.controls button:focus, 
.controls select:focus,
.filters select:focus,
.filters-bar button:focus {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
}

.kpis { display:grid; grid-template-columns:repeat(3,1fr); gap:1rem; margin:1rem 0 2rem; }
.kpi { background:var(--card); border:1px solid var(--border); border-radius:.8rem; padding:1rem; }

.filters { display:grid; grid-template-columns:repeat(5,1fr); gap:.75rem; margin-bottom:.25rem; }
.filters-bar { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; margin:.5rem 0 1rem; }
.insights { margin:1rem 0; padding:1rem; background:var(--panel); border:1px solid var(--border); border-radius:.75rem; }

.legends { display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin:1rem 0; }
.legend-block { background:var(--card); border:1px solid var(--border); border-radius:.6rem; padding:.5rem .75rem; }
.legend-row { display:flex; flex-wrap:wrap; gap:.5rem; }
.legend-chip { display:inline-flex; align-items:center; gap:.35rem; border:1px solid var(--border); border-radius:1rem; padding:.15rem .5rem; font-size:.85rem; }
.legend-chip .swatch { width:12px; height:12px; border-radius:50%; border:1px solid var(--border); }

.charts { display:grid; grid-template-columns:1fr 1fr; gap:1.5rem; margin:1.5rem 0; }
.charts canvas { width:100%; height:340px; background:var(--card); border:1px solid var(--border); border-radius:.6rem; padding:.5rem; }

.caption { font-size:.9rem; color:var(--muted); margin:.5rem 0 1rem; }
#table { background:var(--card); border:1px solid var(--border); border-radius:.6rem; padding:.5rem; }
.chip { font-size:.8rem; padding:.1rem .4rem; border:1px solid var(--border); border-radius:.5rem; }

.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

@media (max-width:900px) {
  .kpis { grid-template-columns:1fr; }
  .filters { grid-template-columns:1fr 1fr; }
  .charts { grid-template-columns:1fr; }
  .legends { grid-template-columns:1fr; }
}

/* Print-friendly view */
@media print {
  body { background:#fff; color:#000; }
  .controls, .filters, .filters-bar, #exportCsv, #exportJson, #themeToggle, #langPicker { display:none !important; }
  .charts canvas { height:260px !important; }
  .caption { color:#000; }
}

/* Theme compatibility and responsiveness */
.page__content .dash-container {
  background: transparent;
}
/* RTL support */
[dir="rtl"] .dash-container {
  direction: rtl;
}
[dir="rtl"] .header-row {
  flex-direction: row-reverse;
}
/* Match theme breakpoints */
@media (max-width: 64em) {
  .dash-container {
    padding: 0 0.5rem;
  }
}
@media (max-width: 48em) {
  .filters {
    grid-template-columns: 1fr;
  }
  
  .header-row {
    flex-direction: column;
    align-items: flex-start;
  }
}
