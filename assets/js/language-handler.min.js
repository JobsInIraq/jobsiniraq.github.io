(function(){"use strict";const SUPPORTED_LANGS=["en","ar","ku"];const RTL_LANGS=["ar","ku"];const STORAGE_KEY="siteLanguage";class UnifiedLanguageManager{constructor(){this.currentLang=this.getSavedLanguage();this.init()}getSavedLanguage(){const saved=localStorage.getItem(STORAGE_KEY);return SUPPORTED_LANGS.includes(saved)?saved:"en"}init(){this.applyLanguage(this.currentLang);this.setupEventListeners();this.initializePicker()}applyLanguage(lang){if(!SUPPORTED_LANGS.includes(lang))lang="en";document.documentElement.setAttribute("lang",lang);document.documentElement.setAttribute("data-locale",lang);const isRTL=RTL_LANGS.includes(lang);document.documentElement.setAttribute("dir",isRTL?"rtl":"ltr");document.body.classList.toggle("rtl",isRTL);this.updateNavigationText(lang);localStorage.setItem(STORAGE_KEY,lang);this.currentLang=lang;window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:lang}}))}updateNavigationText(lang){const translations=window.SITE_TRANSLATIONS;if(!translations||!translations[lang]){console.warn("[i18n] No translations found for:",lang);return}document.querySelectorAll("[data-i18n-key]").forEach(element=>{const key=element.getAttribute("data-i18n-key");if(key&&translations[lang][key]){element.textContent=translations[lang][key]}})}initializePicker(){const picker=document.getElementById("globalLangPicker");if(!picker)return;picker.value=this.currentLang;picker.addEventListener("change",(e)=>{this.applyLanguage(e.target.value)})}setupEventListeners(){window.addEventListener("languageChanged",(e)=>{if(e.detail&&e.detail.language&&e.detail.language!==this.currentLang){this.applyLanguage(e.detail.language)}})}}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",()=>{window.languageManager=new UnifiedLanguageManager()})}else{window.languageManager=new UnifiedLanguageManager()}})();